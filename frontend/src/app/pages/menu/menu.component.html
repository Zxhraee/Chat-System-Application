<h1 class="app-title">Chat System</h1>

<section class="chat-shell" id="chat">
  <header class="chat-header">General Chat</header>

  <div class="chat-body">
    <div *ngIf="messages.length === 0" class="chat-empty">No messages yet.</div>

    <div *ngFor="let m of messages" class="chat-message">
      <div class="chat-row">
        <span class="chat-author">{{ m.username }}</span>
        <span class="chat-text">{{ m.text }}</span>
      </div>

      <div class="chat-when">{{ m.timestamp | date:'d MMMM y' }}</div>
    </div>
  </div>

  <form class="chat-form" (submit)="$event.preventDefault(); send();">
    <input
      name="chatInput"
      [(ngModel)]="input"
      placeholder="Messageâ€¦"
      class="chat-input"
      autocomplete="off"
    />
    <button type="submit" class="chat-send">Send</button>
  </form>
</section>

<h2>My Groups</h2>
<div *ngIf="myGroups.length === 0">You don't belong to any groups yet.</div>

<ng-container *ngFor="let g of myGroups">
  <li *ngIf="!isGeneralGroup(g)">
    <strong>{{ g.name }}</strong>
    <button (click)="openGroupDefaultChannel(g)">Open group chat</button>
    <a [routerLink]="['/groups', g.id, 'channels']" style="margin-left:8px">Browse channels</a>
  </li>
</ng-container>
