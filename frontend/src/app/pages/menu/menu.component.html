<h1 class="app-title">Chat System</h1>

<section class="chat-shell" id="chat">
  <header class="chat-header">General /
  <select [ngModel]="channelId" (ngModelChange)="changeGeneralChannel($event)" class="channel-select">
    <option *ngFor="let c of channels" [ngValue]="c.id">{{ c.name }}</option>
  </select>
  Chat
  </header>
  

  <div class="chat-body">
    <div *ngIf="messages.length === 0" class="chat-empty">No messages yet.</div>

    <div *ngFor="let m of messages" class="chat-message">
      <div class="chat-row">
        <span class="chat-author">{{ m.username }}</span>
        <span class="chat-text">{{ m.text }}</span>
      </div>

      <div class="chat-when">{{ m.timestamp | date:'d MMMM y' }}</div>
    </div>
  </div>

  <form class="chat-form" (submit)="$event.preventDefault(); send();">
    <input
      name="chatInput"
      [(ngModel)]="input"
      placeholder="Messageâ€¦"
      class="chat-input"
      autocomplete="off"
    />
    <button type="submit" class="chat-send">Send</button>
  </form>
</section>

<h2>My Groups</h2>

<section class="groups">
  <div *ngIf="myGroups.length === 0" class="groups-empty">
    You don't belong to any groups yet.
  </div>

  <ul class="groups-list">
    <ng-container *ngFor="let g of myGroups">
      <li *ngIf="!isGeneralGroup(g)" class="group-item">
        <strong class="group-name">{{ g.name }}</strong>
        <div class="group-actions">
          <button (click)="openGroupDefaultChannel(g)" class="btn-primary">Open group chat</button>
        </div>
      </li>
    </ng-container>
  </ul>
</section>
